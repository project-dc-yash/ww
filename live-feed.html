<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sugarcane Detection System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        :root {
            --primary: #00ff41;
            --danger: #ff3131;
            --warning: #ffcc00;
            --bg: #0a0a0a;
            --panel: #151515;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: white; display: flex; height: 100vh; overflow: hidden; }

        /* --- SIDEBAR --- */
        .sidebar { width: 300px; background: #111; border-right: 1px solid #333; padding: 25px; }
        .spec { background: #000; padding: 12px; border-radius: 8px; font-size: 13px; margin-bottom: 10px; border-left: 3px solid var(--primary); }
        .spec b { color: var(--primary); display: block; margin-bottom: 4px; }

        /* --- MAIN VIEWPORT --- */
        .main { flex: 1; display: flex; flex-direction: column; padding: 20px; position: relative; }
        
        .viewport { 
            flex: 1; background: #000; border: 2px solid #333; border-radius: 15px; 
            position: relative; overflow: hidden; display: flex; justify-content: center; align-items: center;
        }

        #displayImg { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* --- SCANNING EFFECT --- */
        .laser {
            position: absolute; width: 100%; height: 4px; background: var(--primary);
            box-shadow: 0 0 20px var(--primary); top: 0; z-index: 10; display: none;
        }
        .scanning .laser { display: block; animation: scanMove 2.5s infinite linear; }
        @keyframes scanMove { 0% { top: 0%; } 100% { top: 100%; } }

        /* --- RESULT POPUP MESSAGE --- */
        .result-popup {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(20, 20, 20, 0.95); padding: 30px; border-radius: 15px;
            border: 2px solid var(--primary); text-align: center; z-index: 100;
            display: none; box-shadow: 0 0 30px rgba(0,0,0,1); min-width: 320px;
        }
        .result-popup h2 { margin-bottom: 10px; font-size: 24px; }
        .result-popup p { margin-bottom: 20px; color: #ccc; }
        .close-btn { background: var(--primary); color: black; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }

        /* --- CONTROLS --- */
        .controls { background: var(--panel); padding: 20px; margin-top: 15px; border-radius: 12px; display: flex; gap: 15px; align-items: center; }
        .btn { padding: 12px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; transition: 0.3s; }
        .btn-upload { background: #333; }
        .btn-scan { background: var(--primary); color: black; flex: 1; }
        
        select { background: #222; color: white; padding: 12px; border: 1px solid #444; border-radius: 6px; cursor: pointer; }

        .detection-box { position: absolute; border: 3px solid var(--danger); display: none; z-index: 11; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2 style="color:var(--primary); margin-bottom:20px;">AI INSPECTION</h2>
        <div class="spec"><b>MODE 1: METAL</b>Detects Nails, Wires, and Industrial Scrap.</div>
        <div class="spec"><b>MODE 2: LEAF</b>Detects Red Rot, Rust, and Unhealthy Leaves.</div>
        
        <div style="margin-top:auto; padding:15px; background:rgba(0,255,65,0.05); border:1px solid #333; font-size:12px;">
            <i class="fas fa-microchip"></i> <b>AI Status:</b> System Online<br>
            <i class="fas fa-database"></i> <b>Dataset:</b> Sugarcane_V4.2
        </div>
    </div>

    <div class="main">
        <div class="viewport" id="viewport">
            <div class="laser"></div>
            <img id="displayImg" src="https://images.unsplash.com/photo-1590682680695-43b964a3ae17?auto=format&fit=crop&w=1200&q=80">
            <div class="detection-box" id="marker"></div>

            <div class="result-popup" id="resultPopup">
                <i id="resultIcon" class="fas fa-check-circle" style="font-size: 50px; margin-bottom: 15px;"></i>
                <h2 id="resultTitle">RESULT</h2>
                <p id="resultDesc">No impurities detected in this batch.</p>
                <button class="close-btn" onclick="closePopup()">OK, CONTINUE</button>
            </div>
        </div>

        <div class="controls">
            <select id="scanMode">
                <option value="metal">METAL DETECTION</option>
                <option value="leaf">LEAF DISEASE ANALYSIS</option>
            </select>

            <input type="file" id="fileInput" hidden onchange="handleFile(event)">
            <button class="btn btn-upload" onclick="document.getElementById('fileInput').click()">UPLOAD IMAGE</button>

            <button class="btn btn-scan" id="scanBtn" onclick="runAI()">RUN AI SCAN</button>
        </div>
    </div>

    <script>
        const viewport = document.getElementById('viewport');
        const displayImg = document.getElementById('displayImg');
        const marker = document.getElementById('marker');
        const popup = document.getElementById('resultPopup');
        const scanBtn = document.getElementById('scanBtn');

        function handleFile(e) {
            const file = e.target.files[0];
            if (file) {
                displayImg.src = URL.createObjectURL(file);
                marker.style.display = 'none';
                popup.style.display = 'none';
            }
        }

        function runAI() {
            viewport.classList.add('scanning');
            scanBtn.disabled = true;
            marker.style.display = 'none';
            popup.style.display = 'none';

            // Simulate AI Processing time
            setTimeout(() => {
                viewport.classList.remove('scanning');
                scanBtn.disabled = false;
                showResults();
            }, 3000);
        }

        function showResults() {
            const mode = document.getElementById('scanMode').value;
            const isUnhealthy = Math.random() > 0.4; // 60% chance to find something

            const icon = document.getElementById('resultIcon');
            const title = document.getElementById('resultTitle');
            const desc = document.getElementById('resultDesc');

            if (isUnhealthy) {
                popup.style.borderColor = (mode === 'metal') ? "var(--danger)" : "var(--warning)";
                icon.className = "fas fa-exclamation-triangle";
                icon.style.color = (mode === 'metal') ? "var(--danger)" : "var(--warning)";
                
                if (mode === 'metal') {
                    title.innerText = "METAL DETECTED!";
                    desc.innerText = "Detected: Industrial Nail / Scrap Metal. Conveyor halted for safety.";
                    marker.style.display = 'block';
                    marker.style.top = '40%'; marker.style.left = '45%';
                    marker.style.width = '100px'; marker.style.height = '100px';
                } else {
                    title.innerText = "DISEASE DETECTED!";
                    desc.innerText = "Targeted Leaf shows symptoms of 'Red Rot' or 'Sugarcane Rust'.";
                }
            } else {
                popup.style.borderColor = "var(--primary)";
                icon.className = "fas fa-check-circle";
                icon.style.color = "var(--primary)";
                title.innerText = "ANALYSIS CLEAR";
                desc.innerText = (mode === 'metal') ? "No metallic impurities found." : "The leaf appears healthy.";
            }

            popup.style.display = 'block';
        }

        function closePopup() {
            popup.style.display = 'none';
        }
    </script>
</body>
</html>